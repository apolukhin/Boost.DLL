<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Function template import_variable</title>
<link rel="stylesheet" href="http://www.boost.org/doc/libs/1_56_0/doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="../../index.html" title="Chapter&#160;1.&#160;Boost.DLL">
<link rel="up" href="../../dll/reference.html#header.boost.dll.refcountable_hpp" title="Header &lt;boost/dll/refcountable.hpp&gt;">
<link rel="prev" href="import_function_idp6503280.html" title="Function template import_function_alias">
<link rel="next" href="import_variable_idp6458560.html" title="Function template import_variable">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="http://www.boost.org/doc/libs/1_56_0/boost.png"></td>
<td align="center"><a href="http://www.boost.org/doc/libs/1_56_0/index.html">Home</a></td>
<td align="center"><a href="http://www.boost.org/doc/libs/1_56_0/libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="http://www.boost.org/doc/libs/1_56_0/more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="import_function_idp6503280.html"><img src="http://www.boost.org/doc/libs/1_56_0/doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../dll/reference.html#header.boost.dll.refcountable_hpp"><img src="http://www.boost.org/doc/libs/1_56_0/doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="http://www.boost.org/doc/libs/1_56_0/doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="import_variable_idp6458560.html"><img src="http://www.boost.org/doc/libs/1_56_0/doc/src/images/next.png" alt="Next"></a>
</div>
<div class="refentry">
<a name="boost.dll.import_variable_idp6448512"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Function template import_variable</span></h2>
<p>boost::dll::import_variable</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="comment">// In header: &lt;<a class="link" href="../../dll/reference.html#header.boost.dll.refcountable_hpp" title="Header &lt;boost/dll/refcountable.hpp&gt;">boost/dll/refcountable.hpp</a>&gt;

</span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> T<span class="special">&gt;</span> 
  <span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;</span> 
  <span class="identifier">import_variable</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span> <span class="identifier">shared_library</span> <span class="special">&gt;</span> <span class="special">&amp;</span> lib<span class="special">,</span> 
                  <span class="identifier">boost</span><span class="special">::</span><span class="identifier">string_ref</span> variable_name<span class="special">)</span><span class="special">;</span></pre></div>
<div class="refsect1">
<a name="idp63812544"></a><h2>Description</h2>
<p>Returns boost::shared_ptr&lt;T&gt; that holds an imported variable from the loaded library and refcounts usage of the loaded shared library, so that it won't get unload until all copies of return value are not destroyed.</p>
<p>This call will succeed if call to <code class="computeroutput">shared_library::search_symbol(const boost::string_ref &amp;)</code> function with the same symbol name returned <code class="computeroutput">true</code>.</p>
<p>For importing variable by it's alias name use boost::dll::import_variable_alias method.</p>
<p>This method has an overload that accepts boost::filesystem::path as a first argument.</p>
<p><span class="bold"><strong>Example:</strong></span> </p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">i</span> <span class="special">=</span> <span class="identifier">import_variable</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span><span class="special">(</span>
          <span class="identifier">boost</span><span class="special">::</span><span class="identifier">make_shared</span><span class="special">&lt;</span><span class="identifier">shared_library</span><span class="special">&gt;</span><span class="special">(</span><span class="string">"test_lib.so"</span><span class="special">)</span><span class="special">,</span>
          <span class="string">"integer_name"</span>
<span class="special">)</span><span class="special">;</span>
</pre>
<p>



</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">lib</code></span></p></td>
<td><p>Shared pointer to library to load variable from.</p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">variable_name</code></span></p></td>
<td><p>Null-terminated name of the variable to import. Can handle std::string, char*, const char*.</p></td>
</tr>
</tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Template Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">T</code></span></p></td>
<td><p>Type of the symbol that we are going to import. Must be explicitly specified.</p></td>
</tr></tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>boost::shared_ptr&lt;T&gt; that holds an imported function from the loaded library and refcounts usage of the loaded shared library.</p></td>
</tr>
<tr>
<td><p><span class="term">Throws:</span></p></td>
<td>boost::system::system_error if symbol does not exist or if the DLL/DSO was not loaded. </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2014 Renato Tegon Forti, Antony Polukhin<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="import_function_idp6503280.html"><img src="http://www.boost.org/doc/libs/1_56_0/doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../dll/reference.html#header.boost.dll.refcountable_hpp"><img src="http://www.boost.org/doc/libs/1_56_0/doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="http://www.boost.org/doc/libs/1_56_0/doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="import_variable_idp6458560.html"><img src="http://www.boost.org/doc/libs/1_56_0/doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
